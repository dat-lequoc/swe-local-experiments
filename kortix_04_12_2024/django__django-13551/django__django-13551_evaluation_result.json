{
  "instance_id": "django__django-13551",
  "test_result": {
    "apply_patch_output": "APPLY_PATCH_PASS\nChecking patch django/contrib/auth/tokens.py...\nApplied patch django/contrib/auth/tokens.py cleanly.\n",
    "test_output": "+ source /opt/miniconda3/bin/activate\n++ _CONDA_ROOT=/opt/miniconda3\n++ . /opt/miniconda3/etc/profile.d/conda.sh\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ '[' -z x ']'\n++ conda activate\n++ local cmd=activate\n++ case \"$cmd\" in\n++ __conda_activate activate\n++ '[' -n '' ']'\n++ local ask_conda\n+++ PS1=\n+++ __conda_exe shell.posix activate\n+++ /opt/miniconda3/bin/conda shell.posix activate\n++ ask_conda='PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''2'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_1='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ eval 'PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''2'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_1='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+++ PS1='(base) '\n+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ export CONDA_PREFIX=/opt/miniconda3\n+++ CONDA_PREFIX=/opt/miniconda3\n+++ export CONDA_SHLVL=2\n+++ CONDA_SHLVL=2\n+++ export CONDA_DEFAULT_ENV=base\n+++ CONDA_DEFAULT_ENV=base\n+++ export 'CONDA_PROMPT_MODIFIER=(base) '\n+++ CONDA_PROMPT_MODIFIER='(base) '\n+++ export CONDA_PREFIX_1=/opt/miniconda3/envs/testbed\n+++ CONDA_PREFIX_1=/opt/miniconda3/envs/testbed\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ __conda_hashr\n++ '[' -n '' ']'\n++ '[' -n '' ']'\n++ hash -r\n+ conda activate testbed\n+ local cmd=activate\n+ case \"$cmd\" in\n+ __conda_activate activate testbed\n+ '[' -n '' ']'\n+ local ask_conda\n++ PS1='(base) '\n++ __conda_exe shell.posix activate testbed\n++ /opt/miniconda3/bin/conda shell.posix activate testbed\n+ ask_conda='PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''3'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_2='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+ eval 'PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''3'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_2='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ PS1='(testbed) '\n++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ export CONDA_SHLVL=3\n++ CONDA_SHLVL=3\n++ export CONDA_DEFAULT_ENV=testbed\n++ CONDA_DEFAULT_ENV=testbed\n++ export 'CONDA_PROMPT_MODIFIER=(testbed) '\n++ CONDA_PROMPT_MODIFIER='(testbed) '\n++ export CONDA_PREFIX_2=/opt/miniconda3\n++ CONDA_PREFIX_2=/opt/miniconda3\n++ export CONDA_EXE=/opt/miniconda3/bin/conda\n++ CONDA_EXE=/opt/miniconda3/bin/conda\n++ export _CE_M=\n++ _CE_M=\n++ export _CE_CONDA=\n++ _CE_CONDA=\n++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+ __conda_hashr\n+ '[' -n '' ']'\n+ '[' -n '' ']'\n+ hash -r\n+ cd /testbed\n+ sed -i '/en_US.UTF-8/s/^# //g' /etc/locale.gen\n+ locale-gen\n+ export LANG=en_US.UTF-8\n+ LANG=en_US.UTF-8\n+ export LANGUAGE=en_US:en\n+ LANGUAGE=en_US:en\n+ export LC_ALL=en_US.UTF-8\n+ LC_ALL=en_US.UTF-8\n+ git config --global --add safe.directory /testbed\n+ cd /testbed\n+ git status\n+ git show\n+ git diff 7f9e4524d6b23424cf44fbe1bf1f4e70f6bb066e\n+ source /opt/miniconda3/bin/activate\n++ _CONDA_ROOT=/opt/miniconda3\n++ . /opt/miniconda3/etc/profile.d/conda.sh\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ '[' -z x ']'\n++ conda activate\n++ local cmd=activate\n++ case \"$cmd\" in\n++ __conda_activate activate\n++ '[' -n '' ']'\n++ local ask_conda\n+++ PS1='(testbed) '\n+++ __conda_exe shell.posix activate\n+++ /opt/miniconda3/bin/conda shell.posix activate\n++ ask_conda='PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''4'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_3='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ eval 'PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''4'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_3='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+++ PS1='(base) '\n+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ export CONDA_PREFIX=/opt/miniconda3\n+++ CONDA_PREFIX=/opt/miniconda3\n+++ export CONDA_SHLVL=4\n+++ CONDA_SHLVL=4\n+++ export CONDA_DEFAULT_ENV=base\n+++ CONDA_DEFAULT_ENV=base\n+++ export 'CONDA_PROMPT_MODIFIER=(base) '\n+++ CONDA_PROMPT_MODIFIER='(base) '\n+++ export CONDA_PREFIX_3=/opt/miniconda3/envs/testbed\n+++ CONDA_PREFIX_3=/opt/miniconda3/envs/testbed\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ __conda_hashr\n++ '[' -n '' ']'\n++ '[' -n '' ']'\n++ hash -r\n+ conda activate testbed\n+ local cmd=activate\n+ case \"$cmd\" in\n+ __conda_activate activate testbed\n+ '[' -n '' ']'\n+ local ask_conda\n++ PS1='(base) '\n++ __conda_exe shell.posix activate testbed\n++ /opt/miniconda3/bin/conda shell.posix activate testbed\n+ ask_conda='PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''5'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_4='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+ eval 'PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''5'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_4='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ PS1='(testbed) '\n++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ export CONDA_SHLVL=5\n++ CONDA_SHLVL=5\n++ export CONDA_DEFAULT_ENV=testbed\n++ CONDA_DEFAULT_ENV=testbed\n++ export 'CONDA_PROMPT_MODIFIER=(testbed) '\n++ CONDA_PROMPT_MODIFIER='(testbed) '\n++ export CONDA_PREFIX_4=/opt/miniconda3\n++ CONDA_PREFIX_4=/opt/miniconda3\n++ export CONDA_EXE=/opt/miniconda3/bin/conda\n++ CONDA_EXE=/opt/miniconda3/bin/conda\n++ export _CE_M=\n++ _CE_M=\n++ export _CE_CONDA=\n++ _CE_CONDA=\n++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+ __conda_hashr\n+ '[' -n '' ']'\n+ '[' -n '' ']'\n+ hash -r\n+ python -m pip install -e .\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n+ git checkout 7f9e4524d6b23424cf44fbe1bf1f4e70f6bb066e tests/auth_tests/models/__init__.py tests/auth_tests/models/with_custom_email_field.py tests/auth_tests/test_models.py tests/auth_tests/test_tokens.py\nUpdated 0 paths from fa49cdf662\n+ git apply -v -\nChecking patch tests/auth_tests/models/__init__.py...\nChecking patch tests/auth_tests/models/with_custom_email_field.py...\nChecking patch tests/auth_tests/test_models.py...\nChecking patch tests/auth_tests/test_tokens.py...\nApplied patch tests/auth_tests/models/__init__.py cleanly.\nApplied patch tests/auth_tests/models/with_custom_email_field.py cleanly.\nApplied patch tests/auth_tests/test_models.py cleanly.\nApplied patch tests/auth_tests/test_tokens.py cleanly.\n+ ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 auth_tests.models.__init__ auth_tests.models.with_custom_email_field auth_tests.test_models auth_tests.test_tokens\nCreating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...\nCreating test database for alias 'other' ('file:memorydb_other?mode=memory&cache=shared')...\ntest_check_password_upgrade (auth_tests.test_models.AbstractUserTestCase) ... ok\ntest_email_user (auth_tests.test_models.AbstractUserTestCase) ... ok\ntest_last_login_default (auth_tests.test_models.AbstractUserTestCase) ... ok\ntest_user_clean_normalize_email (auth_tests.test_models.AbstractUserTestCase) ... ok\ntest_user_double_save (auth_tests.test_models.AbstractUserTestCase) ... ok\ntest_builtin_user_isactive (auth_tests.test_models.IsActiveTestCase) ... ok\ntest_is_active_field_default (auth_tests.test_models.IsActiveTestCase) ... ok\ntest_load_data_with_user_permissions (auth_tests.test_models.LoadDataWithNaturalKeysAndMultipleDatabasesTestCase) ... ok\ntest_user_is_created_and_added_to_group (auth_tests.test_models.LoadDataWithNaturalKeysTestCase) ... ok\ntest_user_is_created_and_added_to_group (auth_tests.test_models.LoadDataWithoutNaturalKeysTestCase) ... ok\ntest_group_natural_key (auth_tests.test_models.NaturalKeysTestCase) ... ok\ntest_user_natural_key (auth_tests.test_models.NaturalKeysTestCase) ... ok\ntest_str (auth_tests.test_models.PermissionTests) ... ok\ntest_create_superuser (auth_tests.test_models.TestCreateSuperUserSignals) ... ok\ntest_create_user (auth_tests.test_models.TestCreateSuperUserSignals) ... ok\ntest_backend_without_with_perm (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_basic (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_custom_backend (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_custom_backend_pass_obj (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_invalid_backend_type (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_invalid_permission_name (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_invalid_permission_type (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_multiple_backends (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_nonexistent_backend (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_nonexistent_permission (auth_tests.test_models.UserWithPermTestCase) ... ok\ntest_10265 (auth_tests.test_tokens.TokenGeneratorTest) ... ok\ntest_check_token_with_nonexistent_token_and_user (auth_tests.test_tokens.TokenGeneratorTest) ... ok\ntest_legacy_token_validation (auth_tests.test_tokens.TokenGeneratorTest) ... ok\ntest_make_token (auth_tests.test_tokens.TokenGeneratorTest) ... ok\ntest_timeout (auth_tests.test_tokens.TokenGeneratorTest)\nThe token is valid after n seconds, but no greater. ... ok\ntest_token_default_hashing_algorithm (auth_tests.test_tokens.TokenGeneratorTest) ... ok\ntest_token_with_different_email (auth_tests.test_tokens.TokenGeneratorTest)\nUpdating the user email address invalidates the token. ... ok\ntest_token_with_different_secret (auth_tests.test_tokens.TokenGeneratorTest) ... ok\ntest_clean_normalize_username (auth_tests.test_models.AbstractBaseUserTests) ... ok\ntest_custom_email (auth_tests.test_models.AbstractBaseUserTests) ... ok\ntest_default_email (auth_tests.test_models.AbstractBaseUserTests) ... ok\ntest_has_usable_password (auth_tests.test_models.AbstractBaseUserTests) ... ok\ntest_normalize_username (auth_tests.test_models.AbstractBaseUserTests) ... ok\ntest_check_password (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_delete (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_eq (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_hash (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_int (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_properties (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_save (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_set_password (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_str (auth_tests.test_models.AnonymousUserTests) ... ok\ntest_str (auth_tests.test_models.GroupTests) ... ok\ntest_create_super_user_raises_error_on_false_is_superuser (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_create_superuser_raises_error_on_false_is_staff (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_create_user (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_create_user_email_domain_normalize (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_create_user_email_domain_normalize_rfc3696 (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_create_user_email_domain_normalize_with_whitespace (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_create_user_is_staff (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_empty_username (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_make_random_password (auth_tests.test_models.UserManagerTestCase) ... ok\ntest_runpython_manager_methods (auth_tests.test_models.UserManagerTestCase) ... ok\n\n----------------------------------------------------------------------\nRan 58 tests in 0.982s\n\nOK\nDestroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...\nDestroying test database for alias 'other' ('file:memorydb_other?mode=memory&cache=shared')...\n+ git checkout 7f9e4524d6b23424cf44fbe1bf1f4e70f6bb066e tests/auth_tests/models/__init__.py tests/auth_tests/models/with_custom_email_field.py tests/auth_tests/test_models.py tests/auth_tests/test_tokens.py\nUpdated 4 paths from fa49cdf662\nGenerating locales (this might take a while)...\n  en_US.UTF-8... done\nGeneration complete.\nOn branch main\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   django/contrib/auth/tokens.py\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\ncommit 7f9e4524d6b23424cf44fbe1bf1f4e70f6bb066e\nAuthor: Jacob Walls <38668450+jacobtylerwalls@users.noreply.github.com>\nDate:   Wed Oct 21 02:06:24 2020 -0400\n\n    Fixed typo in docs/releases/3.2.txt.\n\ndiff --git a/docs/releases/3.2.txt b/docs/releases/3.2.txt\nindex d61f66733d..10842af4fc 100644\n--- a/docs/releases/3.2.txt\n+++ b/docs/releases/3.2.txt\n@@ -290,7 +290,7 @@ Models\n * :class:`Value() <django.db.models.Value>` expression now\n   automatically resolves its ``output_field`` to the appropriate\n   :class:`Field <django.db.models.Field>` subclass based on the type of\n-  it's provided ``value`` for :py:class:`bool`, :py:class:`bytes`,\n+  its provided ``value`` for :py:class:`bool`, :py:class:`bytes`,\n   :py:class:`float`, :py:class:`int`, :py:class:`str`,\n   :py:class:`datetime.date`, :py:class:`datetime.datetime`,\n   :py:class:`datetime.time`, :py:class:`datetime.timedelta`,\ndiff --git a/django/contrib/auth/tokens.py b/django/contrib/auth/tokens.py\nindex 93e2d71af2..9465fa6aca 100644\n--- a/django/contrib/auth/tokens.py\n+++ b/django/contrib/auth/tokens.py\n@@ -94,7 +94,8 @@ class PasswordResetTokenGenerator:\n         # Truncate microseconds so that tokens are consistent even if the\n         # database doesn't support microseconds.\n         login_timestamp = '' if user.last_login is None else user.last_login.replace(microsecond=0, tzinfo=None)\n-        return str(user.pk) + user.password + str(login_timestamp) + str(timestamp)\n+        email = getattr(user, user.get_email_field_name(), '')\n+        return str(user.pk) + user.password + str(login_timestamp) + str(email) + str(timestamp)\n \n     def _num_seconds(self, dt):\n         return int((dt - datetime(2001, 1, 1)).total_seconds())\n@@ -104,4 +105,4 @@ class PasswordResetTokenGenerator:\n         return datetime.now()\n \n \n-default_token_generator = PasswordResetTokenGenerator()\n+default_token_generator = PasswordResetTokenGenerator()\n\\ No newline at end of file\nObtaining file:///testbed\nRequirement already satisfied: asgiref>=3.2.10 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (3.4.1)\nRequirement already satisfied: pytz in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (2024.1)\nRequirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.2) (0.4.4)\nRequirement already satisfied: typing-extensions in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from asgiref>=3.2.10->Django==3.2) (4.1.1)\nInstalling collected packages: Django\n  Attempting uninstall: Django\n    Found existing installation: Django 3.2\n    Uninstalling Django-3.2:\n      Successfully uninstalled Django-3.2\n  Running setup.py develop for Django\nSuccessfully installed Django-3.2\nTesting against Django installed in '/testbed/django'\nImporting application auth_tests\nOperations to perform:\n  Synchronize unmigrated apps: auth, auth_tests, contenttypes, messages, sessions, staticfiles\n  Apply all migrations: admin, sites\nSynchronizing apps without migrations:\n  Creating tables...\n    Creating table django_content_type\n    Creating table auth_permission\n    Creating table auth_group\n    Creating table auth_user\n    Creating table django_session\n    Creating table auth_tests_customuser\n    Creating table auth_tests_customuserwithoutisactivefield\n    Creating table auth_tests_extensionuser\n    Creating table auth_tests_custompermissionsuser\n    Creating table auth_tests_customusernonuniqueusername\n    Creating table auth_tests_isactivetestuser1\n    Creating table auth_tests_minimaluser\n    Creating table auth_tests_nopassworduser\n    Creating table auth_tests_concrete\n    Creating table auth_tests_uuiduser\n    Creating table auth_tests_customemailfield\n    Creating table auth_tests_email\n    Creating table auth_tests_customuserwithfk\n    Creating table auth_tests_integerusernameuser\n    Creating table auth_tests_userwithdisabledlastloginfield\n    Creating table auth_tests_organization\n    Creating table auth_tests_customuserwithm2m\n    Creating table auth_tests_customuserwithm2mthrough\n    Creating table auth_tests_membership\n    Running deferred SQL...\nRunning migrations:\n  Applying admin.0001_initial... OK\n  Applying admin.0002_logentry_remove_auto_add... OK\n  Applying admin.0003_logentry_add_action_flag_choices... OK\n  Applying sites.0001_initial... OK\n  Applying sites.0002_alter_domain_unique... OK\nOperations to perform:\n  Synchronize unmigrated apps: auth, auth_tests, contenttypes, messages, sessions, staticfiles\n  Apply all migrations: admin, sites\nSynchronizing apps without migrations:\n  Creating tables...\n    Creating table django_content_type\n    Creating table auth_permission\n    Creating table auth_group\n    Creating table auth_user\n    Creating table django_session\n    Creating table auth_tests_customuser\n    Creating table auth_tests_customuserwithoutisactivefield\n    Creating table auth_tests_extensionuser\n    Creating table auth_tests_custompermissionsuser\n    Creating table auth_tests_customusernonuniqueusername\n    Creating table auth_tests_isactivetestuser1\n    Creating table auth_tests_minimaluser\n    Creating table auth_tests_nopassworduser\n    Creating table auth_tests_concrete\n    Creating table auth_tests_uuiduser\n    Creating table auth_tests_customemailfield\n    Creating table auth_tests_email\n    Creating table auth_tests_customuserwithfk\n    Creating table auth_tests_integerusernameuser\n    Creating table auth_tests_userwithdisabledlastloginfield\n    Creating table auth_tests_organization\n    Creating table auth_tests_customuserwithm2m\n    Creating table auth_tests_customuserwithm2mthrough\n    Creating table auth_tests_membership\n    Running deferred SQL...\nRunning migrations:\n  Applying admin.0001_initial... OK\n  Applying admin.0002_logentry_remove_auto_add... OK\n  Applying admin.0003_logentry_add_action_flag_choices... OK\n  Applying sites.0001_initial... OK\n  Applying sites.0002_alter_domain_unique... OK\nSystem check identified no issues (0 silenced).\n",
    "report": {
      "patch_is_None": false,
      "patch_exists": true,
      "patch_successfully_applied": true,
      "resolved": true,
      "tests_status": {
        "FAIL_TO_PASS": {
          "success": [
            "Updating the user email address invalidates the token.",
            "test_token_with_different_secret (auth_tests.test_tokens.TokenGeneratorTest)"
          ],
          "failure": []
        },
        "PASS_TO_PASS": {
          "success": [
            "test_str (auth_tests.test_models.GroupTests)",
            "test_group_natural_key (auth_tests.test_models.NaturalKeysTestCase)",
            "test_user_natural_key (auth_tests.test_models.NaturalKeysTestCase)",
            "test_check_password (auth_tests.test_models.AnonymousUserTests)",
            "test_delete (auth_tests.test_models.AnonymousUserTests)",
            "test_eq (auth_tests.test_models.AnonymousUserTests)",
            "test_hash (auth_tests.test_models.AnonymousUserTests)",
            "test_int (auth_tests.test_models.AnonymousUserTests)",
            "test_properties (auth_tests.test_models.AnonymousUserTests)",
            "test_save (auth_tests.test_models.AnonymousUserTests)",
            "test_set_password (auth_tests.test_models.AnonymousUserTests)",
            "test_str (auth_tests.test_models.AnonymousUserTests)",
            "test_create_superuser (auth_tests.test_models.TestCreateSuperUserSignals)",
            "test_create_user (auth_tests.test_models.TestCreateSuperUserSignals)",
            "test_str (auth_tests.test_models.PermissionTests)",
            "test_load_data_with_user_permissions (auth_tests.test_models.LoadDataWithNaturalKeysAndMultipleDatabasesTestCase)",
            "test_10265 (auth_tests.test_tokens.TokenGeneratorTest)",
            "test_check_token_with_nonexistent_token_and_user (auth_tests.test_tokens.TokenGeneratorTest)",
            "test_legacy_token_validation (auth_tests.test_tokens.TokenGeneratorTest)",
            "test_make_token (auth_tests.test_tokens.TokenGeneratorTest)",
            "The token is valid after n seconds, but no greater.",
            "test_token_default_hashing_algorithm (auth_tests.test_tokens.TokenGeneratorTest)",
            "test_user_is_created_and_added_to_group (auth_tests.test_models.LoadDataWithNaturalKeysTestCase)",
            "test_user_is_created_and_added_to_group (auth_tests.test_models.LoadDataWithoutNaturalKeysTestCase)",
            "test_backend_without_with_perm (auth_tests.test_models.UserWithPermTestCase)",
            "test_basic (auth_tests.test_models.UserWithPermTestCase)",
            "test_custom_backend (auth_tests.test_models.UserWithPermTestCase)",
            "test_custom_backend_pass_obj (auth_tests.test_models.UserWithPermTestCase)",
            "test_invalid_backend_type (auth_tests.test_models.UserWithPermTestCase)",
            "test_invalid_permission_name (auth_tests.test_models.UserWithPermTestCase)",
            "test_invalid_permission_type (auth_tests.test_models.UserWithPermTestCase)",
            "test_multiple_backends (auth_tests.test_models.UserWithPermTestCase)",
            "test_nonexistent_backend (auth_tests.test_models.UserWithPermTestCase)",
            "test_nonexistent_permission (auth_tests.test_models.UserWithPermTestCase)",
            "test_clean_normalize_username (auth_tests.test_models.AbstractBaseUserTests)",
            "test_custom_email (auth_tests.test_models.AbstractBaseUserTests)",
            "test_default_email (auth_tests.test_models.AbstractBaseUserTests)",
            "test_has_usable_password (auth_tests.test_models.AbstractBaseUserTests)",
            "test_normalize_username (auth_tests.test_models.AbstractBaseUserTests)",
            "test_builtin_user_isactive (auth_tests.test_models.IsActiveTestCase)",
            "test_is_active_field_default (auth_tests.test_models.IsActiveTestCase)",
            "test_check_password_upgrade (auth_tests.test_models.AbstractUserTestCase)",
            "test_email_user (auth_tests.test_models.AbstractUserTestCase)",
            "test_last_login_default (auth_tests.test_models.AbstractUserTestCase)",
            "test_user_clean_normalize_email (auth_tests.test_models.AbstractUserTestCase)",
            "test_user_double_save (auth_tests.test_models.AbstractUserTestCase)",
            "test_create_super_user_raises_error_on_false_is_superuser (auth_tests.test_models.UserManagerTestCase)",
            "test_create_superuser_raises_error_on_false_is_staff (auth_tests.test_models.UserManagerTestCase)",
            "test_create_user (auth_tests.test_models.UserManagerTestCase)",
            "test_create_user_email_domain_normalize (auth_tests.test_models.UserManagerTestCase)",
            "test_create_user_email_domain_normalize_rfc3696 (auth_tests.test_models.UserManagerTestCase)",
            "test_create_user_email_domain_normalize_with_whitespace (auth_tests.test_models.UserManagerTestCase)",
            "test_create_user_is_staff (auth_tests.test_models.UserManagerTestCase)",
            "test_empty_username (auth_tests.test_models.UserManagerTestCase)",
            "test_make_random_password (auth_tests.test_models.UserManagerTestCase)",
            "test_runpython_manager_methods (auth_tests.test_models.UserManagerTestCase)"
          ],
          "failure": []
        },
        "FAIL_TO_FAIL": {
          "success": [],
          "failure": []
        },
        "PASS_TO_FAIL": {
          "success": [],
          "failure": []
        }
      }
    }
  }
}