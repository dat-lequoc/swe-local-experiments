{
  "instance_id": "django__django-16408",
  "model_patch": "diff --git a/tests/known_related_objects/tests.py b/tests/known_related_objects/tests.py\nindex 6080da3838..0503a406e7 100644\n--- a/tests/known_related_objects/tests.py\n+++ b/tests/known_related_objects/tests.py\n@@ -1,4 +1,4 @@\n-from django.db.models import FilteredRelation\n+from django.db.models import FilteredRelation, Q\n from django.test import TestCase\n \n from .models import Organiser, Pool, PoolStyle, Tournament\n@@ -164,3 +164,18 @@ class ExistingRelatedInstancesTests(TestCase):\n             )\n             self.assertIs(ps[0], ps[0].pool_1.poolstyle)\n             self.assertIs(ps[0], ps[0].pool_2.another_style)\n+\n+    def test_filtered_relation_multilevel(self):\n+        \"\"\"Test multi-level FilteredRelation with select_related().\"\"\"\n+        with self.assertNumQueries(1):\n+            qs = PoolStyle.objects.select_related(\n+                'pool__tournament'\n+            ).annotate(\n+                tournament_ref=FilteredRelation('pool__tournament')\n+            )\n+            p = list(qs)\n+            \n+            # Direct access verification\n+            self.assertIsInstance(p[0].pool.tournament, Tournament)\n+            self.assertIsInstance(p[0].tournament_ref, Tournament)\n+            self.assertEqual(p[0].pool.tournament.id, p[0].tournament_ref.id)\n\\ No newline at end of file\n",
  "model_name_or_path": "KortixAI"
}