{
  "patch": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,8 @@ def add_directive_header(self, sig: str) -> None:\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+                annotations = get_type_hints(self.parent, None,\n+                                             self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2094,8 @@ def add_directive_header(self, sig: str) -> None:\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+                annotations = get_type_hints(self.parent, None,\n+                                             self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
  "test_patch": "diff --git a/tests/roots/test-ext-autodoc/target/annotations.py b/tests/roots/test-ext-autodoc/target/annotations.py\n--- a/tests/roots/test-ext-autodoc/target/annotations.py\n+++ b/tests/roots/test-ext-autodoc/target/annotations.py\n@@ -4,6 +4,9 @@\n \n myint = int\n \n+#: docstring\n+variable: myint\n+\n \n def sum(x: myint, y: myint) -> myint:\n     \"\"\"docstring\"\"\"\n@@ -23,3 +26,10 @@ def mult(x: float, y: float) -> float:\n def mult(x, y):\n     \"\"\"docstring\"\"\"\n     return x, y\n+\n+\n+class Foo:\n+    \"\"\"docstring\"\"\"\n+\n+    #: docstring\n+    attr: myint\ndiff --git a/tests/test_ext_autodoc_configs.py b/tests/test_ext_autodoc_configs.py\n--- a/tests/test_ext_autodoc_configs.py\n+++ b/tests/test_ext_autodoc_configs.py\n@@ -700,6 +700,19 @@ def test_autodoc_type_aliases(app):\n         '.. py:module:: target.annotations',\n         '',\n         '',\n+        '.. py:class:: Foo()',\n+        '   :module: target.annotations',\n+        '',\n+        '   docstring',\n+        '',\n+        '',\n+        '   .. py:attribute:: Foo.attr',\n+        '      :module: target.annotations',\n+        '      :type: int',\n+        '',\n+        '      docstring',\n+        '',\n+        '',\n         '.. py:function:: mult(x: int, y: int) -> int',\n         '                 mult(x: float, y: float) -> float',\n         '   :module: target.annotations',\n@@ -712,6 +725,13 @@ def test_autodoc_type_aliases(app):\n         '',\n         '   docstring',\n         '',\n+        '',\n+        '.. py:data:: variable',\n+        '   :module: target.annotations',\n+        '   :type: int',\n+        '',\n+        '   docstring',\n+        '',\n     ]\n \n     # define aliases\n@@ -722,6 +742,19 @@ def test_autodoc_type_aliases(app):\n         '.. py:module:: target.annotations',\n         '',\n         '',\n+        '.. py:class:: Foo()',\n+        '   :module: target.annotations',\n+        '',\n+        '   docstring',\n+        '',\n+        '',\n+        '   .. py:attribute:: Foo.attr',\n+        '      :module: target.annotations',\n+        '      :type: myint',\n+        '',\n+        '      docstring',\n+        '',\n+        '',\n         '.. py:function:: mult(x: myint, y: myint) -> myint',\n         '                 mult(x: float, y: float) -> float',\n         '   :module: target.annotations',\n@@ -734,6 +767,13 @@ def test_autodoc_type_aliases(app):\n         '',\n         '   docstring',\n         '',\n+        '',\n+        '.. py:data:: variable',\n+        '   :module: target.annotations',\n+        '   :type: myint',\n+        '',\n+        '   docstring',\n+        '',\n     ]\n \n \n"
}