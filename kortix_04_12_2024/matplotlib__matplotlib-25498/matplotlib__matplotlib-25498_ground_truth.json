{
  "patch": "diff --git a/lib/matplotlib/colorbar.py b/lib/matplotlib/colorbar.py\n--- a/lib/matplotlib/colorbar.py\n+++ b/lib/matplotlib/colorbar.py\n@@ -301,11 +301,6 @@ def __init__(self, ax, mappable=None, *, cmap=None,\n         if mappable is None:\n             mappable = cm.ScalarMappable(norm=norm, cmap=cmap)\n \n-        # Ensure the given mappable's norm has appropriate vmin and vmax\n-        # set even if mappable.draw has not yet been called.\n-        if mappable.get_array() is not None:\n-            mappable.autoscale_None()\n-\n         self.mappable = mappable\n         cmap = mappable.cmap\n         norm = mappable.norm\n@@ -1101,7 +1096,10 @@ def _process_values(self):\n             b = np.hstack((b, b[-1] + 1))\n \n         # transform from 0-1 to vmin-vmax:\n+        if self.mappable.get_array() is not None:\n+            self.mappable.autoscale_None()\n         if not self.norm.scaled():\n+            # If we still aren't scaled after autoscaling, use 0, 1 as default\n             self.norm.vmin = 0\n             self.norm.vmax = 1\n         self.norm.vmin, self.norm.vmax = mtransforms.nonsingular(\n",
  "test_patch": "diff --git a/lib/matplotlib/tests/test_colorbar.py b/lib/matplotlib/tests/test_colorbar.py\n--- a/lib/matplotlib/tests/test_colorbar.py\n+++ b/lib/matplotlib/tests/test_colorbar.py\n@@ -657,6 +657,12 @@ def test_colorbar_scale_reset():\n \n     assert cbar.outline.get_edgecolor() == mcolors.to_rgba('red')\n \n+    # log scale with no vmin/vmax set should scale to the data if there\n+    # is a mappable already associated with the colorbar, not (0, 1)\n+    pcm.norm = LogNorm()\n+    assert pcm.norm.vmin == z.min()\n+    assert pcm.norm.vmax == z.max()\n+\n \n def test_colorbar_get_ticks_2():\n     plt.rcParams['_internal.classic_mode'] = False\n"
}