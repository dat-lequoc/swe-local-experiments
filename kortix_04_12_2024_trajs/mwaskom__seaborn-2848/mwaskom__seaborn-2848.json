{
  "instance_id": "mwaskom__seaborn-2848",
  "model_patch": "diff --git a/seaborn/axisgrid.py b/seaborn/axisgrid.py\nindex 8526f44b..00cacc7f 100644\n--- a/seaborn/axisgrid.py\n+++ b/seaborn/axisgrid.py\n@@ -1326,8 +1326,11 @@ class PairGrid(Grid):\n             Must take x, y arrays as positional arguments and draw onto the\n             \"currently active\" matplotlib Axes. Also needs to accept kwargs\n             called ``color`` and  ``label``.\n-\n         \"\"\"\n+        if \"hue\" in kwargs:\n+            hue_data = kwargs[\"hue\"]\n+            if self._setup_hue(hue_data, kwargs.get(\"palette\", None)):\n+                self.data[self._hue_var] = hue_data\n         row_indices, col_indices = np.indices(self.axes.shape)\n         indices = zip(row_indices.flat, col_indices.flat)\n         self._map_bivariate(func, indices, **kwargs)\n@@ -1534,11 +1537,30 @@ class PairGrid(Grid):\n         if \"hue\" in signature(func).parameters:\n             self.hue_names = list(self._legend_data)\n \n+    def _setup_hue(self, hue_data, palette=None):\n+        \"\"\"Setup hue mapping safely for both constructor and map cases\"\"\"\n+        if isinstance(hue_data, pd.Series):\n+            self._hue_var = hue_data.name\n+            self.hue_names = categorical_order(hue_data)\n+            self.palette = self._get_palette(self.data, self._hue_var, self.hue_names, palette)\n+            try:\n+                import pandas as pd\n+                pd.set_option('mode.use_inf_as_null', True)\n+            except (ImportError, KeyError):\n+                pass\n+            return True\n+        return False\n+\n     def _plot_bivariate(self, x_var, y_var, ax, func, **kwargs):\n         \"\"\"Draw a bivariate plot on the specified axes.\"\"\"\n         if \"hue\" not in signature(func).parameters:\n             self._plot_bivariate_iter_hue(x_var, y_var, ax, func, **kwargs)\n             return\n+            \n+        if \"hue\" in kwargs and self._hue_var is None:\n+            hue_data = kwargs[\"hue\"]\n+            if self._setup_hue(hue_data, kwargs.get(\"palette\", None)):\n+                self.data[self._hue_var] = hue_data\n \n         kwargs = kwargs.copy()\n         if str(func.__module__).startswith(\"seaborn\"):\n@@ -2368,4 +2390,4 @@ Examples\n     params=_param_docs,\n     returns=_core_docs[\"returns\"],\n     seealso=_core_docs[\"seealso\"],\n-)\n+)\n\\ No newline at end of file\n",
  "model_name_or_path": "KortixAI"
}