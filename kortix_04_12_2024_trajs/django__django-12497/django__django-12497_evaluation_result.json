{
  "instance_id": "django__django-12497",
  "test_result": {
    "apply_patch_output": "APPLY_PATCH_PASS\nChecking patch django/db/models/fields/related.py...\nApplied patch django/db/models/fields/related.py cleanly.\n",
    "test_output": "+ source /opt/miniconda3/bin/activate\n++ _CONDA_ROOT=/opt/miniconda3\n++ . /opt/miniconda3/etc/profile.d/conda.sh\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ '[' -z x ']'\n++ conda activate\n++ local cmd=activate\n++ case \"$cmd\" in\n++ __conda_activate activate\n++ '[' -n '' ']'\n++ local ask_conda\n+++ PS1=\n+++ __conda_exe shell.posix activate\n+++ /opt/miniconda3/bin/conda shell.posix activate\n++ ask_conda='PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''2'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_1='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ eval 'PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''2'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_1='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+++ PS1='(base) '\n+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ export CONDA_PREFIX=/opt/miniconda3\n+++ CONDA_PREFIX=/opt/miniconda3\n+++ export CONDA_SHLVL=2\n+++ CONDA_SHLVL=2\n+++ export CONDA_DEFAULT_ENV=base\n+++ CONDA_DEFAULT_ENV=base\n+++ export 'CONDA_PROMPT_MODIFIER=(base) '\n+++ CONDA_PROMPT_MODIFIER='(base) '\n+++ export CONDA_PREFIX_1=/opt/miniconda3/envs/testbed\n+++ CONDA_PREFIX_1=/opt/miniconda3/envs/testbed\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ __conda_hashr\n++ '[' -n '' ']'\n++ '[' -n '' ']'\n++ hash -r\n+ conda activate testbed\n+ local cmd=activate\n+ case \"$cmd\" in\n+ __conda_activate activate testbed\n+ '[' -n '' ']'\n+ local ask_conda\n++ PS1='(base) '\n++ __conda_exe shell.posix activate testbed\n++ /opt/miniconda3/bin/conda shell.posix activate testbed\n+ ask_conda='PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''3'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_2='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+ eval 'PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''3'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_2='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ PS1='(testbed) '\n++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ export CONDA_SHLVL=3\n++ CONDA_SHLVL=3\n++ export CONDA_DEFAULT_ENV=testbed\n++ CONDA_DEFAULT_ENV=testbed\n++ export 'CONDA_PROMPT_MODIFIER=(testbed) '\n++ CONDA_PROMPT_MODIFIER='(testbed) '\n++ export CONDA_PREFIX_2=/opt/miniconda3\n++ CONDA_PREFIX_2=/opt/miniconda3\n++ export CONDA_EXE=/opt/miniconda3/bin/conda\n++ CONDA_EXE=/opt/miniconda3/bin/conda\n++ export _CE_M=\n++ _CE_M=\n++ export _CE_CONDA=\n++ _CE_CONDA=\n++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+ __conda_hashr\n+ '[' -n '' ']'\n+ '[' -n '' ']'\n+ hash -r\n+ cd /testbed\n+ sed -i '/en_US.UTF-8/s/^# //g' /etc/locale.gen\n+ locale-gen\n+ export LANG=en_US.UTF-8\n+ LANG=en_US.UTF-8\n+ export LANGUAGE=en_US:en\n+ LANGUAGE=en_US:en\n+ export LC_ALL=en_US.UTF-8\n+ LC_ALL=en_US.UTF-8\n+ git config --global --add safe.directory /testbed\n+ cd /testbed\n+ git status\n+ git show\n+ git diff a4881f5e5d7ee38b7e83301331a0b4962845ef8a\n+ source /opt/miniconda3/bin/activate\n++ _CONDA_ROOT=/opt/miniconda3\n++ . /opt/miniconda3/etc/profile.d/conda.sh\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ '[' -z x ']'\n++ conda activate\n++ local cmd=activate\n++ case \"$cmd\" in\n++ __conda_activate activate\n++ '[' -n '' ']'\n++ local ask_conda\n+++ PS1='(testbed) '\n+++ __conda_exe shell.posix activate\n+++ /opt/miniconda3/bin/conda shell.posix activate\n++ ask_conda='PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''4'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_3='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ eval 'PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''4'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_3='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+++ PS1='(base) '\n+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ export CONDA_PREFIX=/opt/miniconda3\n+++ CONDA_PREFIX=/opt/miniconda3\n+++ export CONDA_SHLVL=4\n+++ CONDA_SHLVL=4\n+++ export CONDA_DEFAULT_ENV=base\n+++ CONDA_DEFAULT_ENV=base\n+++ export 'CONDA_PROMPT_MODIFIER=(base) '\n+++ CONDA_PROMPT_MODIFIER='(base) '\n+++ export CONDA_PREFIX_3=/opt/miniconda3/envs/testbed\n+++ CONDA_PREFIX_3=/opt/miniconda3/envs/testbed\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ __conda_hashr\n++ '[' -n '' ']'\n++ '[' -n '' ']'\n++ hash -r\n+ conda activate testbed\n+ local cmd=activate\n+ case \"$cmd\" in\n+ __conda_activate activate testbed\n+ '[' -n '' ']'\n+ local ask_conda\n++ PS1='(base) '\n++ __conda_exe shell.posix activate testbed\n++ /opt/miniconda3/bin/conda shell.posix activate testbed\n+ ask_conda='PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''5'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_4='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+ eval 'PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''5'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_4='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ PS1='(testbed) '\n++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ export CONDA_SHLVL=5\n++ CONDA_SHLVL=5\n++ export CONDA_DEFAULT_ENV=testbed\n++ CONDA_DEFAULT_ENV=testbed\n++ export 'CONDA_PROMPT_MODIFIER=(testbed) '\n++ CONDA_PROMPT_MODIFIER='(testbed) '\n++ export CONDA_PREFIX_4=/opt/miniconda3\n++ CONDA_PREFIX_4=/opt/miniconda3\n++ export CONDA_EXE=/opt/miniconda3/bin/conda\n++ CONDA_EXE=/opt/miniconda3/bin/conda\n++ export _CE_M=\n++ _CE_M=\n++ export _CE_CONDA=\n++ _CE_CONDA=\n++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+ __conda_hashr\n+ '[' -n '' ']'\n+ '[' -n '' ']'\n+ hash -r\n+ python -m pip install -e .\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n+ git checkout a4881f5e5d7ee38b7e83301331a0b4962845ef8a tests/invalid_models_tests/test_relative_fields.py\nUpdated 0 paths from 31f2a93b2e\n+ git apply -v -\nChecking patch tests/invalid_models_tests/test_relative_fields.py...\nApplied patch tests/invalid_models_tests/test_relative_fields.py cleanly.\n+ ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 invalid_models_tests.test_relative_fields\ntest_clash_between_accessors (invalid_models_tests.test_relative_fields.AccessorClashTests) ... ok\ntest_fk_to_fk (invalid_models_tests.test_relative_fields.AccessorClashTests) ... ok\ntest_fk_to_integer (invalid_models_tests.test_relative_fields.AccessorClashTests) ... ok\ntest_fk_to_m2m (invalid_models_tests.test_relative_fields.AccessorClashTests) ... ok\ntest_m2m_to_fk (invalid_models_tests.test_relative_fields.AccessorClashTests) ... ok\ntest_m2m_to_integer (invalid_models_tests.test_relative_fields.AccessorClashTests) ... ok\ntest_m2m_to_m2m (invalid_models_tests.test_relative_fields.AccessorClashTests) ... ok\ntest_m2m_to_m2m_with_inheritance (invalid_models_tests.test_relative_fields.AccessorClashTests)\nRef #22047. ... ok\ntest_no_clash_for_hidden_related_name (invalid_models_tests.test_relative_fields.AccessorClashTests) ... ok\ntest_clash_parent_link (invalid_models_tests.test_relative_fields.ComplexClashTests) ... ok\ntest_complex_clash (invalid_models_tests.test_relative_fields.ComplexClashTests) ... ok\ntest_fk_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests) ... ok\ntest_fk_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests) ... ok\ntest_fk_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests) ... ok\ntest_m2m_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests) ... ok\ntest_m2m_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests) ... ok\ntest_m2m_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests) ... ok\ntest_fk_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_fk_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_fk_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_hidden_fk_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_hidden_fk_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_hidden_fk_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_hidden_m2m_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_hidden_m2m_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_hidden_m2m_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_m2m_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_m2m_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_m2m_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests) ... ok\ntest_explicit_field_names (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests) ... ok\ntest_intersection_foreign_object (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests) ... ok\ntest_invalid_field (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests) ... ok\ntest_invalid_order (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests) ... ok\ntest_m2m_field_argument_validation (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests) ... ok\ntest_superset_foreign_object (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests) ... ok\ntest_ambiguous_relationship_model_from (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_ambiguous_relationship_model_to (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_key_to_abstract_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_key_to_isolate_apps_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_key_to_missing_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_key_to_non_unique_field (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_key_to_non_unique_field_under_explicit_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_key_to_partially_unique_field (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_key_to_unique_field_with_meta_constraint (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_object_to_non_unique_fields (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_object_to_partially_unique_field (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_foreign_object_to_unique_field_with_meta_constraint (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_invalid_related_query_name (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_m2m_to_abstract_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_many_to_many_through_isolate_apps_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_many_to_many_to_isolate_apps_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_many_to_many_to_missing_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_many_to_many_with_limit_choices_auto_created_no_warning (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_many_to_many_with_useless_options (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_missing_relationship_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_missing_relationship_model_on_model_check (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_not_swapped_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_nullable_primary_key (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_on_delete_set_default_without_default_value (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_on_delete_set_null_on_non_nullable_field (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_referencing_to_swapped_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_related_field_has_invalid_related_name (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_related_field_has_valid_related_name (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_relationship_model_missing_foreign_key (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_relationship_model_with_foreign_key_to_wrong_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_to_fields_exist (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_to_fields_not_checked_if_related_model_doesnt_exist (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_too_many_foreign_keys_in_self_referential_model (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_unique_m2m (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_valid_foreign_key_without_accessor (invalid_models_tests.test_relative_fields.RelativeFieldTests) ... ok\ntest_fk_to_fk (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests) ... ok\ntest_fk_to_integer (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests) ... ok\ntest_fk_to_m2m (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests) ... ok\ntest_m2m_to_fk (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests) ... ok\ntest_m2m_to_integer (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests) ... ok\ntest_m2m_to_m2m (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests) ... ok\ntest_accessor_clash (invalid_models_tests.test_relative_fields.SelfReferentialFKClashTests) ... ok\ntest_clash_under_explicit_related_name (invalid_models_tests.test_relative_fields.SelfReferentialFKClashTests) ... ok\ntest_reverse_query_name_clash (invalid_models_tests.test_relative_fields.SelfReferentialFKClashTests) ... ok\ntest_accessor_clash (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests) ... ok\ntest_clash_between_accessors (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests) ... ok\ntest_clash_under_explicit_related_name (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests) ... ok\ntest_reverse_query_name_clash (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests) ... ok\ntest_valid_model (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests) ... ok\n\n----------------------------------------------------------------------\nRan 84 tests in 0.230s\n\nOK\n+ git checkout a4881f5e5d7ee38b7e83301331a0b4962845ef8a tests/invalid_models_tests/test_relative_fields.py\nUpdated 1 path from 31f2a93b2e\nGenerating locales (this might take a while)...\n  en_US.UTF-8... done\nGeneration complete.\nOn branch main\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   django/db/models/fields/related.py\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\ncommit a4881f5e5d7ee38b7e83301331a0b4962845ef8a\nAuthor: 007gzs <007gzs@gmail.com>\nDate:   Tue Feb 25 08:37:34 2020 +0800\n\n    Fixed #31307 -- Fixed filter_horizontal add/remove SVG :hover positioning.\n\ndiff --git a/AUTHORS b/AUTHORS\nindex afc4ad0306..220533f648 100644\n--- a/AUTHORS\n+++ b/AUTHORS\n@@ -534,6 +534,7 @@ answer newbie questions, and generally made Django that much better:\n     Liang Feng <hutuworm@gmail.com>\n     limodou\n     Lincoln Smith <lincoln.smith@anu.edu.au>\n+    Liu Yijie <007gzs@gmail.com>\n     Loek van Gent <loek@barakken.nl>\n     Lo\u00efc Bistuer <loic.bistuer@sixmedia.com>\n     Lowe Thiderman <lowe.thiderman@gmail.com>\ndiff --git a/django/contrib/admin/static/admin/css/responsive.css b/django/contrib/admin/static/admin/css/responsive.css\nindex b3db28fbf0..d7866c174e 100644\n--- a/django/contrib/admin/static/admin/css/responsive.css\n+++ b/django/contrib/admin/static/admin/css/responsive.css\n@@ -354,6 +354,14 @@ input[type=\"submit\"], button {\n     }\n \n     .stacked .active.selector-add {\n+        background-position: 0 -40px;\n+    }\n+\n+    .active.selector-add:focus, .active.selector-add:hover {\n+        background-position: 0 -140px;\n+    }\n+\n+    .stacked .active.selector-add:focus, .stacked .active.selector-add:hover {\n         background-position: 0 -60px;\n     }\n \n@@ -362,6 +370,14 @@ input[type=\"submit\"], button {\n     }\n \n     .stacked .active.selector-remove {\n+        background-position: 0 0;\n+    }\n+\n+    .active.selector-remove:focus, .active.selector-remove:hover {\n+        background-position: 0 -100px;\n+    }\n+\n+    .stacked .active.selector-remove:focus, .stacked .active.selector-remove:hover {\n         background-position: 0 -20px;\n     }\n \n@@ -725,10 +741,18 @@ input[type=\"submit\"], button {\n         background-position: 0 0;\n     }\n \n+    .active.selector-remove:focus, .active.selector-remove:hover {\n+        background-position: 0 -20px;\n+    }\n+\n     .selector-add  {\n         background-position: 0 -40px;\n     }\n \n+    .active.selector-add:focus, .active.selector-add:hover {\n+        background-position: 0 -60px;\n+    }\n+\n     /* Inlines */\n \n     .inline-group[data-inline-type=\"stacked\"] .inline-related {\ndiff --git a/django/contrib/admin/static/admin/css/widgets.css b/django/contrib/admin/static/admin/css/widgets.css\nindex 6dbc58e018..14ef12db94 100644\n--- a/django/contrib/admin/static/admin/css/widgets.css\n+++ b/django/contrib/admin/static/admin/css/widgets.css\n@@ -211,6 +211,11 @@ a.active.selector-clearall:focus, a.active.selector-clearall:hover {\n }\n \n .stacked .active.selector-add {\n+    background-position: 0 -32px;\n+    cursor: pointer;\n+}\n+\n+.stacked .active.selector-add:focus, .stacked .active.selector-add:hover {\n     background-position: 0 -48px;\n     cursor: pointer;\n }\n@@ -221,6 +226,11 @@ a.active.selector-clearall:focus, a.active.selector-clearall:hover {\n }\n \n .stacked .active.selector-remove {\n+    background-position: 0 0px;\n+    cursor: pointer;\n+}\n+\n+.stacked .active.selector-remove:focus, .stacked .active.selector-remove:hover {\n     background-position: 0 -16px;\n     cursor: pointer;\n }\ndiff --git a/django/db/models/fields/related.py b/django/db/models/fields/related.py\nindex 8ddbb5ba68..76b0d71b09 100644\n--- a/django/db/models/fields/related.py\n+++ b/django/db/models/fields/related.py\n@@ -1309,7 +1309,7 @@ class ManyToManyField(RelatedField):\n                              \"through_fields keyword argument.\") % (self, from_model_name),\n                             hint=(\n                                 'If you want to create a recursive relationship, '\n-                                'use ForeignKey(\"%s\", symmetrical=False, through=\"%s\").'\n+                                'use ManyToManyField(\"%s\", through=\"%s\").'\n                             ) % (\n                                 RECURSIVE_RELATIONSHIP_CONSTANT,\n                                 relationship_model_name,\n@@ -1329,7 +1329,7 @@ class ManyToManyField(RelatedField):\n                             \"through_fields keyword argument.\" % (self, to_model_name),\n                             hint=(\n                                 'If you want to create a recursive relationship, '\n-                                'use ForeignKey(\"%s\", symmetrical=False, through=\"%s\").'\n+                                'use ManyToManyField(\"%s\", through=\"%s\").'\n                             ) % (\n                                 RECURSIVE_RELATIONSHIP_CONSTANT,\n                                 relationship_model_name,\n@@ -1693,4 +1693,4 @@ class ManyToManyField(RelatedField):\n         return None\n \n     def db_parameters(self, connection):\n-        return {\"type\": None, \"check\": None}\n+        return {\"type\": None, \"check\": None}\n\\ No newline at end of file\nObtaining file:///testbed\nRequirement already satisfied: asgiref>=3.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (3.4.1)\nRequirement already satisfied: pytz in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (2024.1)\nRequirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from Django==3.1) (0.4.4)\nRequirement already satisfied: typing-extensions in /opt/miniconda3/envs/testbed/lib/python3.6/site-packages (from asgiref>=3.2->Django==3.1) (4.1.1)\nInstalling collected packages: Django\n  Attempting uninstall: Django\n    Found existing installation: Django 3.1\n    Uninstalling Django-3.1:\n      Successfully uninstalled Django-3.1\n  Running setup.py develop for Django\nSuccessfully installed Django-3.1\nTesting against Django installed in '/testbed/django'\nImporting application invalid_models_tests\nSkipping setup of unused database(s): default, other.\nSystem check identified no issues (0 silenced).\n",
    "report": {
      "patch_is_None": false,
      "patch_exists": true,
      "patch_successfully_applied": true,
      "resolved": true,
      "tests_status": {
        "FAIL_TO_PASS": {
          "success": [
            "test_ambiguous_relationship_model_from (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_ambiguous_relationship_model_to (invalid_models_tests.test_relative_fields.RelativeFieldTests)"
          ],
          "failure": []
        },
        "PASS_TO_PASS": {
          "success": [
            "test_accessor_clash (invalid_models_tests.test_relative_fields.SelfReferentialFKClashTests)",
            "test_clash_under_explicit_related_name (invalid_models_tests.test_relative_fields.SelfReferentialFKClashTests)",
            "test_reverse_query_name_clash (invalid_models_tests.test_relative_fields.SelfReferentialFKClashTests)",
            "test_explicit_field_names (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests)",
            "test_intersection_foreign_object (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests)",
            "test_invalid_field (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests)",
            "test_invalid_order (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests)",
            "test_m2m_field_argument_validation (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests)",
            "test_superset_foreign_object (invalid_models_tests.test_relative_fields.M2mThroughFieldsTests)",
            "test_clash_parent_link (invalid_models_tests.test_relative_fields.ComplexClashTests)",
            "test_complex_clash (invalid_models_tests.test_relative_fields.ComplexClashTests)",
            "test_accessor_clash (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests)",
            "test_clash_between_accessors (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests)",
            "test_clash_under_explicit_related_name (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests)",
            "test_reverse_query_name_clash (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests)",
            "test_valid_model (invalid_models_tests.test_relative_fields.SelfReferentialM2MClashTests)",
            "test_fk_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests)",
            "test_fk_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests)",
            "test_fk_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests)",
            "test_m2m_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests)",
            "test_m2m_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests)",
            "test_m2m_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedNameClashTests)",
            "test_clash_between_accessors (invalid_models_tests.test_relative_fields.AccessorClashTests)",
            "test_fk_to_fk (invalid_models_tests.test_relative_fields.AccessorClashTests)",
            "test_fk_to_integer (invalid_models_tests.test_relative_fields.AccessorClashTests)",
            "test_fk_to_m2m (invalid_models_tests.test_relative_fields.AccessorClashTests)",
            "test_m2m_to_fk (invalid_models_tests.test_relative_fields.AccessorClashTests)",
            "test_m2m_to_integer (invalid_models_tests.test_relative_fields.AccessorClashTests)",
            "test_m2m_to_m2m (invalid_models_tests.test_relative_fields.AccessorClashTests)",
            "Ref #22047.",
            "test_no_clash_for_hidden_related_name (invalid_models_tests.test_relative_fields.AccessorClashTests)",
            "test_fk_to_fk (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests)",
            "test_fk_to_integer (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests)",
            "test_fk_to_m2m (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests)",
            "test_m2m_to_fk (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests)",
            "test_m2m_to_integer (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests)",
            "test_m2m_to_m2m (invalid_models_tests.test_relative_fields.ReverseQueryNameClashTests)",
            "test_fk_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_fk_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_fk_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_hidden_fk_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_hidden_fk_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_hidden_fk_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_hidden_m2m_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_hidden_m2m_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_hidden_m2m_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_m2m_to_fk (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_m2m_to_integer (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_m2m_to_m2m (invalid_models_tests.test_relative_fields.ExplicitRelatedQueryNameClashTests)",
            "test_foreign_key_to_abstract_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_key_to_isolate_apps_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_key_to_missing_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_key_to_non_unique_field (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_key_to_non_unique_field_under_explicit_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_key_to_partially_unique_field (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_key_to_unique_field_with_meta_constraint (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_object_to_non_unique_fields (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_object_to_partially_unique_field (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_foreign_object_to_unique_field_with_meta_constraint (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_invalid_related_query_name (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_m2m_to_abstract_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_many_to_many_through_isolate_apps_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_many_to_many_to_isolate_apps_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_many_to_many_to_missing_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_many_to_many_with_limit_choices_auto_created_no_warning (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_many_to_many_with_useless_options (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_missing_relationship_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_missing_relationship_model_on_model_check (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_not_swapped_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_nullable_primary_key (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_on_delete_set_default_without_default_value (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_on_delete_set_null_on_non_nullable_field (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_referencing_to_swapped_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_related_field_has_invalid_related_name (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_related_field_has_valid_related_name (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_relationship_model_missing_foreign_key (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_relationship_model_with_foreign_key_to_wrong_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_to_fields_exist (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_to_fields_not_checked_if_related_model_doesnt_exist (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_too_many_foreign_keys_in_self_referential_model (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_unique_m2m (invalid_models_tests.test_relative_fields.RelativeFieldTests)",
            "test_valid_foreign_key_without_accessor (invalid_models_tests.test_relative_fields.RelativeFieldTests)"
          ],
          "failure": []
        },
        "FAIL_TO_FAIL": {
          "success": [],
          "failure": []
        },
        "PASS_TO_FAIL": {
          "success": [],
          "failure": []
        }
      }
    }
  }
}