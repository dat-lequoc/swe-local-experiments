{
  "instance_id": "django__django-16139",
  "test_result": {
    "apply_patch_output": "APPLY_PATCH_PASS\nChecking patch django/contrib/auth/forms.py...\nChecking patch tests/auth_tests/test_forms.py...\nApplied patch django/contrib/auth/forms.py cleanly.\nApplied patch tests/auth_tests/test_forms.py cleanly.\n",
    "test_output": "+ source /opt/miniconda3/bin/activate\n++ _CONDA_ROOT=/opt/miniconda3\n++ . /opt/miniconda3/etc/profile.d/conda.sh\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ '[' -z x ']'\n++ conda activate\n++ local cmd=activate\n++ case \"$cmd\" in\n++ __conda_activate activate\n++ '[' -n '' ']'\n++ local ask_conda\n+++ PS1=\n+++ __conda_exe shell.posix activate\n+++ /opt/miniconda3/bin/conda shell.posix activate\n++ ask_conda='PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''2'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_1='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ eval 'PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''2'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_1='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+++ PS1='(base) '\n+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ export CONDA_PREFIX=/opt/miniconda3\n+++ CONDA_PREFIX=/opt/miniconda3\n+++ export CONDA_SHLVL=2\n+++ CONDA_SHLVL=2\n+++ export CONDA_DEFAULT_ENV=base\n+++ CONDA_DEFAULT_ENV=base\n+++ export 'CONDA_PROMPT_MODIFIER=(base) '\n+++ CONDA_PROMPT_MODIFIER='(base) '\n+++ export CONDA_PREFIX_1=/opt/miniconda3/envs/testbed\n+++ CONDA_PREFIX_1=/opt/miniconda3/envs/testbed\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ __conda_hashr\n++ '[' -n '' ']'\n++ '[' -n '' ']'\n++ hash -r\n+ conda activate testbed\n+ local cmd=activate\n+ case \"$cmd\" in\n+ __conda_activate activate testbed\n+ '[' -n '' ']'\n+ local ask_conda\n++ PS1='(base) '\n++ __conda_exe shell.posix activate testbed\n++ /opt/miniconda3/bin/conda shell.posix activate testbed\n+ ask_conda='PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''3'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_2='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+ eval 'PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''3'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_2='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ PS1='(testbed) '\n++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ export CONDA_SHLVL=3\n++ CONDA_SHLVL=3\n++ export CONDA_DEFAULT_ENV=testbed\n++ CONDA_DEFAULT_ENV=testbed\n++ export 'CONDA_PROMPT_MODIFIER=(testbed) '\n++ CONDA_PROMPT_MODIFIER='(testbed) '\n++ export CONDA_PREFIX_2=/opt/miniconda3\n++ CONDA_PREFIX_2=/opt/miniconda3\n++ export CONDA_EXE=/opt/miniconda3/bin/conda\n++ CONDA_EXE=/opt/miniconda3/bin/conda\n++ export _CE_M=\n++ _CE_M=\n++ export _CE_CONDA=\n++ _CE_CONDA=\n++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+ __conda_hashr\n+ '[' -n '' ']'\n+ '[' -n '' ']'\n+ hash -r\n+ cd /testbed\n+ git config --global --add safe.directory /testbed\n+ cd /testbed\n+ git status\n+ git show\n+ git diff d559cb02da30f74debbb1fc3a46de0df134d2d80\n+ source /opt/miniconda3/bin/activate\n++ _CONDA_ROOT=/opt/miniconda3\n++ . /opt/miniconda3/etc/profile.d/conda.sh\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ '[' -z x ']'\n++ conda activate\n++ local cmd=activate\n++ case \"$cmd\" in\n++ __conda_activate activate\n++ '[' -n '' ']'\n++ local ask_conda\n+++ PS1='(testbed) '\n+++ __conda_exe shell.posix activate\n+++ /opt/miniconda3/bin/conda shell.posix activate\n++ ask_conda='PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''4'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_3='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ eval 'PS1='\\''(base) '\\''\nexport PATH='\\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3'\\''\nexport CONDA_SHLVL='\\''4'\\''\nexport CONDA_DEFAULT_ENV='\\''base'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(base) '\\''\nexport CONDA_PREFIX_3='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+++ PS1='(base) '\n+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n+++ export CONDA_PREFIX=/opt/miniconda3\n+++ CONDA_PREFIX=/opt/miniconda3\n+++ export CONDA_SHLVL=4\n+++ CONDA_SHLVL=4\n+++ export CONDA_DEFAULT_ENV=base\n+++ CONDA_DEFAULT_ENV=base\n+++ export 'CONDA_PROMPT_MODIFIER=(base) '\n+++ CONDA_PROMPT_MODIFIER='(base) '\n+++ export CONDA_PREFIX_3=/opt/miniconda3/envs/testbed\n+++ CONDA_PREFIX_3=/opt/miniconda3/envs/testbed\n+++ export CONDA_EXE=/opt/miniconda3/bin/conda\n+++ CONDA_EXE=/opt/miniconda3/bin/conda\n+++ export _CE_M=\n+++ _CE_M=\n+++ export _CE_CONDA=\n+++ _CE_CONDA=\n+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ __conda_hashr\n++ '[' -n '' ']'\n++ '[' -n '' ']'\n++ hash -r\n+ conda activate testbed\n+ local cmd=activate\n+ case \"$cmd\" in\n+ __conda_activate activate testbed\n+ '[' -n '' ']'\n+ local ask_conda\n++ PS1='(base) '\n++ __conda_exe shell.posix activate testbed\n++ /opt/miniconda3/bin/conda shell.posix activate testbed\n+ ask_conda='PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''5'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_4='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n+ eval 'PS1='\\''(testbed) '\\''\nexport PATH='\\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\\''\nexport CONDA_PREFIX='\\''/opt/miniconda3/envs/testbed'\\''\nexport CONDA_SHLVL='\\''5'\\''\nexport CONDA_DEFAULT_ENV='\\''testbed'\\''\nexport CONDA_PROMPT_MODIFIER='\\''(testbed) '\\''\nexport CONDA_PREFIX_4='\\''/opt/miniconda3'\\''\nexport CONDA_EXE='\\''/opt/miniconda3/bin/conda'\\''\nexport _CE_M='\\'''\\''\nexport _CE_CONDA='\\'''\\''\nexport CONDA_PYTHON_EXE='\\''/opt/miniconda3/bin/python'\\'''\n++ PS1='(testbed) '\n++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ CONDA_PREFIX=/opt/miniconda3/envs/testbed\n++ export CONDA_SHLVL=5\n++ CONDA_SHLVL=5\n++ export CONDA_DEFAULT_ENV=testbed\n++ CONDA_DEFAULT_ENV=testbed\n++ export 'CONDA_PROMPT_MODIFIER=(testbed) '\n++ CONDA_PROMPT_MODIFIER='(testbed) '\n++ export CONDA_PREFIX_4=/opt/miniconda3\n++ CONDA_PREFIX_4=/opt/miniconda3\n++ export CONDA_EXE=/opt/miniconda3/bin/conda\n++ CONDA_EXE=/opt/miniconda3/bin/conda\n++ export _CE_M=\n++ _CE_M=\n++ export _CE_CONDA=\n++ _CE_CONDA=\n++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python\n+ __conda_hashr\n+ '[' -n '' ']'\n+ '[' -n '' ']'\n+ hash -r\n+ python -m pip install -e .\nWARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n+ git checkout d559cb02da30f74debbb1fc3a46de0df134d2d80 tests/auth_tests/test_forms.py\nUpdated 1 path from e4f3dab1c7\n+ git apply -v -\nChecking patch tests/auth_tests/test_forms.py...\nApplied patch tests/auth_tests/test_forms.py cleanly.\n+ ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 auth_tests.test_forms\nCreating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...\ntest_html_autocomplete_attributes (auth_tests.test_forms.AdminPasswordChangeFormTest) ... ok\ntest_missing_passwords (auth_tests.test_forms.AdminPasswordChangeFormTest) ... ok\ntest_non_matching_passwords (auth_tests.test_forms.AdminPasswordChangeFormTest) ... ok\ntest_one_password (auth_tests.test_forms.AdminPasswordChangeFormTest) ... ok\ntest_password_whitespace_not_stripped (auth_tests.test_forms.AdminPasswordChangeFormTest) ... ok\ntest_success (auth_tests.test_forms.AdminPasswordChangeFormTest) ... ok\ntest_custom_login_allowed_policy (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_get_invalid_login_error (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_html_autocomplete_attributes (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_inactive_user (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_inactive_user_i18n (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_inactive_user_incorrect_password (auth_tests.test_forms.AuthenticationFormTest)\nAn invalid login doesn't leak the inactive status of a user. ... ok\ntest_integer_username (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_invalid_username (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_login_failed (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_no_password (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_password_whitespace_not_stripped (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_success (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_unicode_username (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_username_field_autocapitalize_none (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_username_field_label (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_username_field_label_empty_string (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_username_field_label_not_set (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_username_field_max_length_defaults_to_254 (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_username_field_max_length_matches_user_model (auth_tests.test_forms.AuthenticationFormTest) ... ok\ntest_field_order (auth_tests.test_forms.PasswordChangeFormTest) ... ok\ntest_html_autocomplete_attributes (auth_tests.test_forms.PasswordChangeFormTest) ... ok\ntest_incorrect_password (auth_tests.test_forms.PasswordChangeFormTest) ... ok\ntest_password_verification (auth_tests.test_forms.PasswordChangeFormTest) ... ok\ntest_password_whitespace_not_stripped (auth_tests.test_forms.PasswordChangeFormTest) ... ok\ntest_success (auth_tests.test_forms.PasswordChangeFormTest) ... ok\ntest_cleaned_data (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_custom_email_constructor (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_custom_email_field (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_custom_email_subject (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_html_autocomplete_attributes (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_inactive_user (auth_tests.test_forms.PasswordResetFormTest)\nInactive user cannot receive password reset email. ... ok\ntest_invalid_email (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_nonexistent_email (auth_tests.test_forms.PasswordResetFormTest)\nTest nonexistent email address. This should not fail because it would ... ok\ntest_preserve_username_case (auth_tests.test_forms.PasswordResetFormTest)\nPreserve the case of the user name (before the @ in the email address) ... ok\ntest_save_html_email_template_name (auth_tests.test_forms.PasswordResetFormTest)\nTest the PasswordResetForm.save() method with html_email_template_name ... ok\ntest_save_plaintext_email (auth_tests.test_forms.PasswordResetFormTest)\nTest the PasswordResetForm.save() method with no html_email_template_name ... ok\ntest_unusable_password (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_user_email_domain_unicode_collision (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_user_email_domain_unicode_collision_nonexistent (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_user_email_unicode_collision (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_user_email_unicode_collision_nonexistent (auth_tests.test_forms.PasswordResetFormTest) ... ok\ntest_help_text_translation (auth_tests.test_forms.SetPasswordFormTest) ... ok\ntest_html_autocomplete_attributes (auth_tests.test_forms.SetPasswordFormTest) ... ok\ntest_no_password (auth_tests.test_forms.SetPasswordFormTest) ... ok\ntest_password_verification (auth_tests.test_forms.SetPasswordFormTest) ... ok\ntest_password_whitespace_not_stripped (auth_tests.test_forms.SetPasswordFormTest) ... ok\ntest_success (auth_tests.test_forms.SetPasswordFormTest) ... ok\ntest_validates_password (auth_tests.test_forms.SetPasswordFormTest) ... ok\ntest_bug_14242 (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_bug_17944_empty_password (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_bug_17944_unknown_password_algorithm (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_bug_17944_unmanageable_password (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_bug_19133 (auth_tests.test_forms.UserChangeFormTest)\nThe change form does not return the password value ... ok\ntest_bug_19349_bound_password_field (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_custom_form (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_link_to_password_reset_in_helptext_via_to_field (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_password_excluded (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_unusable_password (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_username_field_autocapitalize_none (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_username_validity (auth_tests.test_forms.UserChangeFormTest) ... ok\ntest_both_passwords (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_custom_form (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_custom_form_hidden_username_field (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_custom_form_with_different_username_field (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_duplicate_normalized_unicode (auth_tests.test_forms.UserCreationFormTest)\nTo prevent almost identical usernames, visually identical but differing ... ok\ntest_html_autocomplete_attributes (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_invalid_data (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_normalize_username (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_password_help_text (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_password_verification (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_password_whitespace_not_stripped (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_success (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_unicode_username (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_user_already_exists (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_user_create_form_validates_password_with_all_data (auth_tests.test_forms.UserCreationFormTest)\nUserCreationForm password validation uses all of the form's data. ... ok\ntest_username_field_autocapitalize_none (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_validates_password (auth_tests.test_forms.UserCreationFormTest) ... ok\ntest_bug_19349_render_with_none_value (auth_tests.test_forms.ReadOnlyPasswordHashTest) ... ok\ntest_label (auth_tests.test_forms.ReadOnlyPasswordHashTest)\nReadOnlyPasswordHashWidget doesn't contain a for attribute in the ... ok\ntest_readonly_field_has_changed (auth_tests.test_forms.ReadOnlyPasswordHashTest) ... ok\ntest_render (auth_tests.test_forms.ReadOnlyPasswordHashTest) ... ok\n\n----------------------------------------------------------------------\nRan 87 tests in 0.392s\n\nOK\nDestroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...\n+ git checkout d559cb02da30f74debbb1fc3a46de0df134d2d80 tests/auth_tests/test_forms.py\nUpdated 1 path from e4f3dab1c7\nOn branch main\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   django/contrib/auth/forms.py\n\tmodified:   tests/auth_tests/test_forms.py\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\ncommit d559cb02da30f74debbb1fc3a46de0df134d2d80\nAuthor: Mariusz Felisiak <felisiak.mariusz@gmail.com>\nDate:   Thu Oct 27 08:41:03 2022 +0200\n\n    Refs #19215 -- Fixed admin_widgets tests if Pillow isn't installed.\n    \n    Follow up to c0fc1b5302f5d9d82e2255fb5758321fbac34949.\n\ndiff --git a/tests/admin_widgets/models.py b/tests/admin_widgets/models.py\nindex 26eaf5d243..0113ecb7c8 100644\n--- a/tests/admin_widgets/models.py\n+++ b/tests/admin_widgets/models.py\n@@ -5,8 +5,13 @@ from django.contrib.auth.models import User\n from django.core.files.storage import FileSystemStorage\n from django.db import models\n \n-temp_storage_dir = tempfile.mkdtemp()\n-temp_storage = FileSystemStorage(temp_storage_dir)\n+try:\n+    from PIL import Image\n+except ImportError:\n+    Image = None\n+else:\n+    temp_storage_dir = tempfile.mkdtemp()\n+    temp_storage = FileSystemStorage(temp_storage_dir)\n \n \n class MyFileField(models.FileField):\n@@ -182,9 +187,10 @@ class Advisor(models.Model):\n \n class Student(models.Model):\n     name = models.CharField(max_length=255)\n-    photo = models.ImageField(\n-        storage=temp_storage, upload_to=\"photos\", blank=True, null=True\n-    )\n+    if Image:\n+        photo = models.ImageField(\n+            storage=temp_storage, upload_to=\"photos\", blank=True, null=True\n+        )\n \n     class Meta:\n         ordering = (\"name\",)\ndiff --git a/tests/admin_widgets/tests.py b/tests/admin_widgets/tests.py\nindex bf26c1edc1..70b1233ef4 100644\n--- a/tests/admin_widgets/tests.py\n+++ b/tests/admin_widgets/tests.py\n@@ -3,6 +3,7 @@ import os\n import re\n from datetime import datetime, timedelta\n from importlib import import_module\n+from unittest import skipUnless\n \n try:\n     import zoneinfo\n@@ -38,6 +39,7 @@ from .models import (\n     Company,\n     Event,\n     Honeycomb,\n+    Image,\n     Individual,\n     Inventory,\n     Member,\n@@ -1774,6 +1776,7 @@ class RelatedFieldWidgetSeleniumTests(AdminWidgetSeleniumTestCase):\n         self.assertEqual(profiles[0].user.username, username_value)\n \n \n+@skipUnless(Image, \"Pillow not installed\")\n class ImageFieldWidgetsSeleniumTests(AdminWidgetSeleniumTestCase):\n     def test_clearablefileinput_widget(self):\n         from selenium.webdriver.common.by import By\ndiff --git a/django/contrib/auth/forms.py b/django/contrib/auth/forms.py\nindex b3cfc6723c..c7043c6adb 100644\n--- a/django/contrib/auth/forms.py\n+++ b/django/contrib/auth/forms.py\n@@ -163,7 +163,7 @@ class UserChangeForm(forms.ModelForm):\n         super().__init__(*args, **kwargs)\n         password = self.fields.get(\"password\")\n         if password:\n-            password.help_text = password.help_text.format(\"../password/\")\n+            password.help_text = password.help_text.format(f\"../../{self.instance.pk}/password/\")\n         user_permissions = self.fields.get(\"user_permissions\")\n         if user_permissions:\n             user_permissions.queryset = user_permissions.queryset.select_related(\n@@ -482,4 +482,4 @@ class AdminPasswordChangeForm(forms.Form):\n         for name in self.fields:\n             if name not in data:\n                 return []\n-        return [\"password\"]\n+        return [\"password\"]\n\\ No newline at end of file\ndiff --git a/tests/auth_tests/test_forms.py b/tests/auth_tests/test_forms.py\nindex 3bacd7a9fb..5e713c6748 100644\n--- a/tests/auth_tests/test_forms.py\n+++ b/tests/auth_tests/test_forms.py\n@@ -802,6 +802,12 @@ class PasswordChangeFormTest(TestDataMixin, TestCase):\n         self.assertEqual(form.cleaned_data[\"new_password1\"], data[\"new_password1\"])\n         self.assertEqual(form.cleaned_data[\"new_password2\"], data[\"new_password2\"])\n \n+    def test_password_help_text_with_to_field(self):\n+        \"\"\"Password help text link is correct when accessed via to_field.\"\"\"\n+        user = User.objects.get(username=\"testclient\")\n+        form = UserChangeForm(instance=user)\n+        self.assertIn(f\"../../{user.pk}/password/\", form.fields['password'].help_text)\n+\n     def test_html_autocomplete_attributes(self):\n         user = User.objects.get(username=\"testclient\")\n         form = PasswordChangeForm(user)\n@@ -1281,4 +1287,4 @@ class AdminPasswordChangeFormTest(TestDataMixin, TestCase):\n             with self.subTest(field_name=field_name, autocomplete=autocomplete):\n                 self.assertEqual(\n                     form.fields[field_name].widget.attrs[\"autocomplete\"], autocomplete\n-                )\n+                )\n\\ No newline at end of file\nObtaining file:///testbed\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'done'\n  Checking if build backend supports build_editable: started\n  Checking if build backend supports build_editable: finished with status 'done'\n  Getting requirements to build editable: started\n  Getting requirements to build editable: finished with status 'done'\n  Preparing editable metadata (pyproject.toml): started\n  Preparing editable metadata (pyproject.toml): finished with status 'done'\nRequirement already satisfied: asgiref>=3.5.2 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Django==4.2.dev20221027064103) (3.8.1)\nRequirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Django==4.2.dev20221027064103) (0.5.1)\nRequirement already satisfied: typing-extensions>=4 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from asgiref>=3.5.2->Django==4.2.dev20221027064103) (4.12.2)\nBuilding wheels for collected packages: Django\n  Building editable for Django (pyproject.toml): started\n  Building editable for Django (pyproject.toml): finished with status 'done'\n  Created wheel for Django: filename=Django-4.2.dev20221027064103-0.editable-py3-none-any.whl size=27190 sha256=c89a58cce765b36c03f0db8566b66f5b29fc73c4937d24dbfbb2db8843e6421c\n  Stored in directory: /tmp/pip-ephem-wheel-cache-bi7n_31q/wheels/7d/66/67/70d1ee2124ccf21d601c352e25cdca10f611f7c8b3f9ffb9e4\nSuccessfully built Django\nInstalling collected packages: Django\n  Attempting uninstall: Django\n    Found existing installation: Django 4.2.dev20221027064103\n    Uninstalling Django-4.2.dev20221027064103:\n      Successfully uninstalled Django-4.2.dev20221027064103\nSuccessfully installed Django-4.2.dev20221027064103\nTesting against Django installed in '/testbed/django'\nImporting application auth_tests\nFound 87 test(s).\nSkipping setup of unused database(s): other.\nOperations to perform:\n  Synchronize unmigrated apps: auth, auth_tests, contenttypes, messages, sessions, staticfiles\n  Apply all migrations: admin, sites\nSynchronizing apps without migrations:\n  Creating tables...\n    Creating table django_content_type\n    Creating table auth_permission\n    Creating table auth_group\n    Creating table auth_user\n    Creating table django_session\n    Creating table auth_tests_customuser\n    Creating table auth_tests_customuserwithoutisactivefield\n    Creating table auth_tests_extensionuser\n    Creating table auth_tests_custompermissionsuser\n    Creating table auth_tests_customusernonuniqueusername\n    Creating table auth_tests_isactivetestuser1\n    Creating table auth_tests_minimaluser\n    Creating table auth_tests_nopassworduser\n    Creating table auth_tests_concrete\n    Creating table auth_tests_uuiduser\n    Creating table auth_tests_customemailfield\n    Creating table auth_tests_email\n    Creating table auth_tests_customuserwithfk\n    Creating table auth_tests_integerusernameuser\n    Creating table auth_tests_userwithdisabledlastloginfield\n    Creating table auth_tests_organization\n    Creating table auth_tests_customuserwithm2m\n    Creating table auth_tests_customuserwithm2mthrough\n    Creating table auth_tests_membership\n    Creating table auth_tests_customuserwithuniqueconstraint\n    Running deferred SQL...\nRunning migrations:\n  Applying admin.0001_initial... OK\n  Applying admin.0002_logentry_remove_auto_add... OK\n  Applying admin.0003_logentry_add_action_flag_choices... OK\n  Applying sites.0001_initial... OK\n  Applying sites.0002_alter_domain_unique... OK\nSystem check identified no issues (0 silenced).\n",
    "report": {
      "patch_is_None": false,
      "patch_exists": true,
      "patch_successfully_applied": true,
      "resolved": true,
      "tests_status": {
        "FAIL_TO_PASS": {
          "success": [
            "test_link_to_password_reset_in_helptext_via_to_field (auth_tests.test_forms.UserChangeFormTest)"
          ],
          "failure": []
        },
        "PASS_TO_PASS": {
          "success": [
            "test_field_order (auth_tests.test_forms.PasswordChangeFormTest)",
            "test_html_autocomplete_attributes (auth_tests.test_forms.PasswordChangeFormTest)",
            "test_incorrect_password (auth_tests.test_forms.PasswordChangeFormTest)",
            "test_password_verification (auth_tests.test_forms.PasswordChangeFormTest)",
            "test_password_whitespace_not_stripped (auth_tests.test_forms.PasswordChangeFormTest)",
            "test_success (auth_tests.test_forms.PasswordChangeFormTest)",
            "test_html_autocomplete_attributes (auth_tests.test_forms.AdminPasswordChangeFormTest)",
            "test_missing_passwords (auth_tests.test_forms.AdminPasswordChangeFormTest)",
            "test_non_matching_passwords (auth_tests.test_forms.AdminPasswordChangeFormTest)",
            "test_one_password (auth_tests.test_forms.AdminPasswordChangeFormTest)",
            "test_password_whitespace_not_stripped (auth_tests.test_forms.AdminPasswordChangeFormTest)",
            "test_success (auth_tests.test_forms.AdminPasswordChangeFormTest)",
            "test_both_passwords (auth_tests.test_forms.UserCreationFormTest)",
            "test_custom_form (auth_tests.test_forms.UserCreationFormTest)",
            "test_custom_form_hidden_username_field (auth_tests.test_forms.UserCreationFormTest)",
            "test_custom_form_with_different_username_field (auth_tests.test_forms.UserCreationFormTest)",
            "To prevent almost identical usernames, visually identical but differing",
            "test_html_autocomplete_attributes (auth_tests.test_forms.UserCreationFormTest)",
            "test_invalid_data (auth_tests.test_forms.UserCreationFormTest)",
            "test_normalize_username (auth_tests.test_forms.UserCreationFormTest)",
            "test_password_help_text (auth_tests.test_forms.UserCreationFormTest)",
            "test_password_verification (auth_tests.test_forms.UserCreationFormTest)",
            "test_password_whitespace_not_stripped (auth_tests.test_forms.UserCreationFormTest)",
            "test_success (auth_tests.test_forms.UserCreationFormTest)",
            "test_unicode_username (auth_tests.test_forms.UserCreationFormTest)",
            "test_user_already_exists (auth_tests.test_forms.UserCreationFormTest)",
            "UserCreationForm password validation uses all of the form's data.",
            "test_username_field_autocapitalize_none (auth_tests.test_forms.UserCreationFormTest)",
            "test_validates_password (auth_tests.test_forms.UserCreationFormTest)",
            "test_bug_19349_render_with_none_value (auth_tests.test_forms.ReadOnlyPasswordHashTest)",
            "ReadOnlyPasswordHashWidget doesn't contain a for attribute in the",
            "test_readonly_field_has_changed (auth_tests.test_forms.ReadOnlyPasswordHashTest)",
            "test_render (auth_tests.test_forms.ReadOnlyPasswordHashTest)",
            "test_help_text_translation (auth_tests.test_forms.SetPasswordFormTest)",
            "test_html_autocomplete_attributes (auth_tests.test_forms.SetPasswordFormTest)",
            "test_no_password (auth_tests.test_forms.SetPasswordFormTest)",
            "test_password_verification (auth_tests.test_forms.SetPasswordFormTest)",
            "test_password_whitespace_not_stripped (auth_tests.test_forms.SetPasswordFormTest)",
            "test_success (auth_tests.test_forms.SetPasswordFormTest)",
            "test_validates_password (auth_tests.test_forms.SetPasswordFormTest)",
            "test_custom_login_allowed_policy (auth_tests.test_forms.AuthenticationFormTest)",
            "test_get_invalid_login_error (auth_tests.test_forms.AuthenticationFormTest)",
            "test_html_autocomplete_attributes (auth_tests.test_forms.AuthenticationFormTest)",
            "test_inactive_user (auth_tests.test_forms.AuthenticationFormTest)",
            "test_inactive_user_i18n (auth_tests.test_forms.AuthenticationFormTest)",
            "An invalid login doesn't leak the inactive status of a user.",
            "test_integer_username (auth_tests.test_forms.AuthenticationFormTest)",
            "test_invalid_username (auth_tests.test_forms.AuthenticationFormTest)",
            "test_login_failed (auth_tests.test_forms.AuthenticationFormTest)",
            "test_no_password (auth_tests.test_forms.AuthenticationFormTest)",
            "test_password_whitespace_not_stripped (auth_tests.test_forms.AuthenticationFormTest)",
            "test_success (auth_tests.test_forms.AuthenticationFormTest)",
            "test_unicode_username (auth_tests.test_forms.AuthenticationFormTest)",
            "test_username_field_autocapitalize_none (auth_tests.test_forms.AuthenticationFormTest)",
            "test_username_field_label (auth_tests.test_forms.AuthenticationFormTest)",
            "test_username_field_label_empty_string (auth_tests.test_forms.AuthenticationFormTest)",
            "test_username_field_label_not_set (auth_tests.test_forms.AuthenticationFormTest)",
            "test_username_field_max_length_defaults_to_254 (auth_tests.test_forms.AuthenticationFormTest)",
            "test_username_field_max_length_matches_user_model (auth_tests.test_forms.AuthenticationFormTest)",
            "test_cleaned_data (auth_tests.test_forms.PasswordResetFormTest)",
            "test_custom_email_constructor (auth_tests.test_forms.PasswordResetFormTest)",
            "test_custom_email_field (auth_tests.test_forms.PasswordResetFormTest)",
            "test_custom_email_subject (auth_tests.test_forms.PasswordResetFormTest)",
            "test_html_autocomplete_attributes (auth_tests.test_forms.PasswordResetFormTest)",
            "Inactive user cannot receive password reset email.",
            "test_invalid_email (auth_tests.test_forms.PasswordResetFormTest)",
            "Test nonexistent email address. This should not fail because it would",
            "Preserve the case of the user name (before the @ in the email address)",
            "Test the PasswordResetForm.save() method with html_email_template_name",
            "Test the PasswordResetForm.save() method with no html_email_template_name",
            "test_unusable_password (auth_tests.test_forms.PasswordResetFormTest)",
            "test_user_email_domain_unicode_collision (auth_tests.test_forms.PasswordResetFormTest)",
            "test_user_email_domain_unicode_collision_nonexistent (auth_tests.test_forms.PasswordResetFormTest)",
            "test_user_email_unicode_collision (auth_tests.test_forms.PasswordResetFormTest)",
            "test_user_email_unicode_collision_nonexistent (auth_tests.test_forms.PasswordResetFormTest)",
            "test_bug_14242 (auth_tests.test_forms.UserChangeFormTest)",
            "test_bug_17944_empty_password (auth_tests.test_forms.UserChangeFormTest)",
            "test_bug_17944_unknown_password_algorithm (auth_tests.test_forms.UserChangeFormTest)",
            "test_bug_17944_unmanageable_password (auth_tests.test_forms.UserChangeFormTest)",
            "The change form does not return the password value",
            "test_bug_19349_bound_password_field (auth_tests.test_forms.UserChangeFormTest)",
            "test_custom_form (auth_tests.test_forms.UserChangeFormTest)",
            "test_password_excluded (auth_tests.test_forms.UserChangeFormTest)",
            "test_unusable_password (auth_tests.test_forms.UserChangeFormTest)",
            "test_username_field_autocapitalize_none (auth_tests.test_forms.UserChangeFormTest)",
            "test_username_validity (auth_tests.test_forms.UserChangeFormTest)"
          ],
          "failure": []
        },
        "FAIL_TO_FAIL": {
          "success": [],
          "failure": []
        },
        "PASS_TO_FAIL": {
          "success": [],
          "failure": []
        }
      }
    }
  }
}